import sparkGuest from './index';
import axios from 'axios';
import MockAdapter from 'axios-mock-adapter';

describe(`Spark Guest API`, () => {
  it(`is defined properly`, () => {
    expect(sparkGuest).toBeDefined();
    expect(sparkGuest.getFreeUser).toBeDefined();
  });
});

describe(`getFreeUser()`, () => {

  const mock = new MockAdapter(axios);

  afterEach(() => {
    mock.restore();
  });

  it(`GET /users/states/free 200 OK`, () => {
    const apiResponse = {
      clientId: `abc123`
    };
    mock.onGet(`/users/states/free`).reply(200, apiResponse);
    sparkGuest.getFreeUser().then((data) => {
      expect(data).toBe(apiResponse);
    });
  });
});


